<!DOCTYPE html>

<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>TreeTable</title>

    <link href="../js/treeTable/jquery.treetable.theme.default.css" rel="stylesheet"
          type="text/css"/>
    <link href="../js/treeTable/jquery.treetable.css" rel="stylesheet" type="text/css"/>
    <script src="../js/jquery.min.js"></script>
    <script src="../js/treeTable/jquery.treetable.js"></script>


</head>
<body>
<div class="tableView">
    <table id="example-advanced">

        <tr data-tt-id="1">
            <td>总公司</td>
        </tr>
        <tr data-tt-id="5" data-tt-parent-id="1">
            <td>信息与运营委员会</td>
        </tr>
        <tr data-tt-id="6" data-tt-parent-id="1">
            <td>风险控制委员会</td>
        </tr>
        <tr data-tt-id="5" data-tt-parent-id="6">
            <td>风险控制委员会</td>
        </tr>

    </table>

</div>
<script>


    (function () {


        function loadView() {
            $.get({
                url: "../js/treetable.json",
                success: function (e) {
                    console.log(e);
                    var sysOfficeList = e.sysOfficeList;
                    initView(sysOfficeList)
                }
            });
        }


        function initView(sysOfficeList) {
            console.log(this);
            var html = "";


            html = '   <table id="example-advanced">\n' +
                '\n' +
                '        <tr data-tt-id="1">\n' +
                '            <td>总123公司</td>\n' +
                '        </tr>\n' +
                '        <tr data-tt-id="5" data-tt-parent-id="1">\n' +
                '            <td>信息与123运营委员会</td>\n' +
                '        </tr>\n' +
                '        <tr data-tt-id="6" data-tt-parent-id="1">\n' +
                '            <td>风险控123制委员会</td>\n' +
                '        </tr>\n' +
                '        <tr data-tt-id="5" data-tt-parent-id="6">\n' +
                '            <td>风123123险控123123123123123制委员会</td>\n' +
                '        </tr>\n' +
                '\n' +
                '    </table>';
            $(".tableView").html(html);
            $("#example-advanced").treetable({
                expandable: true,// 展示
                initialState: "expanded",//默认打开所有节点
                stringCollapse: '关闭',
                stringExpand: '展开',
                onNodeExpand: function () {// 分支展开后的回调函数
                    console.log("123123123");
                    loadView();
                }
            });
        }

        var config = {
            expandable: true
        };
        // $("#example-advanced").treetable(config);
        setTimeout(function () {
            loadView();
        }, 2000);

        $("#example-advanced").treetable({
            expandable: true,// 展示
            initialState: "expanded",//默认打开所有节点
            stringCollapse: '关闭',
            stringExpand: '展开',
            onNodeExpand: function () {// 分支展开后的回调函数
                console.log("123123123");

                setTimeout(function () {
                    loadView();
                }, 2000);
            }
        });
    })();

</script>
</body>
</html>

