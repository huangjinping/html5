<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script type="text/javascript" src="https://res.wx.qq.com/open/js/jweixin-1.3.2.js"></script>


</head>

<body>
  <p id="typeName"></p>

<script type="text/javascript">
   var  doc= document.getElementById("typeName");
   doc.innerText="asdasd";
   console.log(wx);
//    wx.miniProgram.getEnv(function(res) {
//        if(res.miniprogram){
//            // true代表在小程序里
//            doc.innerText="true";
//        }else{
//
//            //false代表在公众号里
//            doc.innerText="false";
//        }
//    })



   var ua = window.navigator.userAgent.toLowerCase();
   if(ua.match(/MicroMessenger/i) == 'micromessenger'){    //判断是否是微信环境

       //微信环境
       wx.miniProgram.getEnv(function(res) {
           if (res.miniprogram) {
               // 小程序环境下逻辑
               console.log("小程序环境下逻辑");
               doc.innerText="小程序环境下逻辑";
               window.location.href="https://hdfex.com/bestSignUrl/weixinWebViewCallback.html?name=1211232";
           }else {
               doc.innerText="非小程序环境下逻辑";

               //非小程序环境下逻辑
               console.log("非小程序环境下逻辑");

           }
       })
   }else{
       //非微信环境逻辑
       doc.innerText="非微信环境逻辑";

       console.log("非微信环境逻辑");
   }

</script>

</body>
</html>